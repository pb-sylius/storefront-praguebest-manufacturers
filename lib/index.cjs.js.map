{"version":3,"file":"index.cjs.js","sources":["../src/factories/useManufacturerFactory.ts"],"sourcesContent":["import { UseManufacturer, UseManufacturerFactoryParams, UseManufacturerErrors } from \"../types\";\nimport { Ref, computed } from '@nuxtjs/composition-api';\nimport { PlatformApi, sharedRef, Logger, configureFactoryParams } from '@vue-storefront/core';\n\nexport function useManufacturerFactory<MANUFACTURERS, MANUFUACTURER_SEARCH_PARAMS, API extends PlatformApi = any>(\n  factoryParams: UseManufacturerFactoryParams<MANUFACTURERS, MANUFUACTURER_SEARCH_PARAMS, API>\n) {\n  return function useManufacturer(id: string): UseManufacturer<MANUFACTURERS, MANUFUACTURER_SEARCH_PARAMS, API> {\n    const manufacturers: Ref<MANUFACTURERS> = sharedRef([], `useManufacturer-manufacturers-${id}`);\n    const loading = sharedRef(false, `useManufacturer-loading-${id}`);\n    const error: Ref<UseManufacturerErrors> = sharedRef({\n      search: null\n    }, `useManufacturer-error-${id}`);\n\n    const _factoryParams = configureFactoryParams(\n      factoryParams,\n      { mainRef: manufacturers, alias: 'currentManufacturers', loading, error }\n    );\n\n    const search = async (searchParams) => {\n      Logger.debug(`useManufacturer/${id}/search`, searchParams);\n\n      try {\n        loading.value = true;\n        manufacturers.value = await _factoryParams.manufacturersSearch(searchParams);\n        error.value.search = null;\n      } catch (err) {\n        error.value.search = err;\n        Logger.error(`useManufacturer/${id}/search`, err);\n      } finally {\n        loading.value = false;\n      }\n    };\n\n    const all = async (searchParams) => {\n      Logger.debug(`useManufacturer/${id}/search`, searchParams);\n\n      try {\n        loading.value = true;\n        manufacturers.value = await _factoryParams.manufacturersAll(searchParams);\n        error.value.search = null;\n      } catch (err) {\n        error.value.search = err;\n        Logger.error(`useManufacturer/${id}/search`, err);\n      } finally {\n        loading.value = false;\n      }\n    };\n\n    const one = async (searchParams) => {\n      Logger.debug(`useManufacturer/${id}/search`, searchParams);\n\n      try {\n        loading.value = true;\n        manufacturers.value = await _factoryParams.manufacturersOne(searchParams);\n        error.value.search = null;\n      } catch (err) {\n        error.value.search = err;\n        Logger.error(`useManufacturer/${id}/search`, err);\n      } finally {\n        loading.value = false;\n      }\n    };\n\n    return {\n      search,\n      all,\n      one,\n      manufacturers: computed(() => manufacturers.value),\n      loading: computed(() => loading.value),\n      error: computed(() => error.value)\n    };\n  };\n}\n"],"names":["sharedRef","configureFactoryParams","Logger","computed"],"mappings":"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"}